// RUN: %target-swift-frontend -module-name A -Xllvm -sil-disable-pass=LowerAggregateInstr -emit-ir %s | %FileCheck %s
sil_stage lowered

import Builtin
import Swift
import SwiftShims

struct S {
    var s: ArraySlice<UInt8>
    var i: ArraySlice<UInt8>.Index
}


// CHECK: define{{.*}} swiftcc void @copy_test(
// CHECK-NOT:  call ptr @"$s1A1SVSgWOb"(
// CHECK: memcpy
// CHECK:  ret void

sil @copy_test : $@convention(thin) (@in Optional<S>) -> @out Optional<S> {
bb0(%0 : $*Optional<S>, %1 : $*Optional<S>):
  copy_addr [take] %1 to [init] %0 : $*Optional<S>
  %5 = tuple ()
  return %5 : $()
}
